
PUSHI 0 // variavel bin
PUSHI 0 // variavel valor

START


PUSHS "Introduza uma string binária:"
WRITES
WRITELN

READ
STOREG 1

PUSHG 1
PUSHA bintoint
CALL
POP 4
PUSHG 0
STOREG 2

PUSHS "O valor inteiro correspondente é: "
WRITES
PUSHG 2
WRITEI
WRITELN

STOP

bintoint:

PUSHN 3


PUSHI 0
STOREL 1

PUSHI 1
STOREL 2

PUSHL -1
STRLEN
STOREL 0
LOOP0:
PUSHL 0
PUSHI 1
SUPEQ
JZ ENDLOOP0
PUSHL -1
PUSHL 0
PUSHI 1
SUB
CHARAT
PUSHS "1"
CHRCODE
EQUAL
JZ ENDIF0 // if
PUSHL 1
PUSHL 2
ADD
STOREL 1
JUMP ENDIF0
ENDIF0:

PUSHL 2
PUSHI 2
MUL
STOREL 2

PUSHL 0
PUSHI 1
SUB
STOREL 0
JUMP LOOP0
ENDLOOP0:

PUSHL 1
STOREG 0

RETURN

